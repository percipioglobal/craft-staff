var L=Object.defineProperty,B=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var z=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,A=(e,t)=>{for(var o in t||(t={}))j.call(t,o)&&z(e,o,t[o]);if(_)for(var o of _(t))E.call(t,o)&&z(e,o,t[o]);return e},N=(e,t)=>B(e,S(t));import{o as a,c as x,a as s,d as $,t as c,z as Q,b as g,n as w,r as F,e as k,F as D,v as R,u as T,f as u,h as V,i as O,j as G,y as H,p as U,D as I}from"./vendor.8d35d0ec.js";import{R as J}from"./requests.3ba2f9f6.js";import{_ as K,L as M}from"./listitem--loading.c0f41471.js";import{d as W}from"./useApolloClient.d3f22c17.js";const X={},Y={class:"flex items-center justify-center p-4 border-b border-solid border-gray-200"},Z=s("span",{class:"text-base"}," No results found ",-1),ee=[Z];function te(e,t){return a(),x("div",Y,ee)}var se=K(X,[["render",te]]);const oe=["href","title"],re={class:"col-span-2 flex items-center whitespace-nowrap pl-4 pr-3 sm:pl-6 py-4 text-sm text-gray-500"},ne={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ie={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500 capitalize"},ae={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},le={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},de={key:0,class:"block"},ue={class:"flex items-center whitespace-nowrap px-3 pr-3 py-4 text-sm"},ce=$({props:{request:null},setup(e){return(t,o)=>{var i,l,f,p,C,P,m,n,r,d,v,y,h,b,q;return e.request?(a(),x("a",{key:0,href:`/admin/staff-management/requests/${e.request.id}`,title:`Go to request ${e.request.id}`,class:"grid grid-cols-11 border-b border-solid border-gray-200 no-underline hover:bg-gray-200"},[s("div",re,c(((f=(l=(i=e.request)==null?void 0:i.employee)==null?void 0:l.personalDetails)==null?void 0:f.firstName)?e.request.employee.personalDetails.firstName+" "+e.request.employee.personalDetails.lastName:"-"),1),s("div",ne,c(((p=e.request)==null?void 0:p.employer)?e.request.employer:"-"),1),s("div",ie,c(((C=e.request)==null?void 0:C.type)?e.request.type.replace("_"," "):"-"),1),s("div",ae,c(((P=e.request)==null?void 0:P.dateCreated)?e.request.dateCreated:"-"),1),s("div",le,[Q(c(((m=e.request)==null?void 0:m.admin)?e.request.admin:"-")+" ",1),((n=e.request)==null?void 0:n.admin)&&((r=e.request)==null?void 0:r.dateAdministered)?(a(),x("span",de," on the "+c(((d=e.request)==null?void 0:d.dateAdministered)?e.request.dateAdministered:"-"),1)):g("",!0)]),s("div",ue,[s("span",{class:w(["rounded-2xl text-xs font-bold px-3 py-1 mb-0",((v=e.request)==null?void 0:v.status)==="pending"?"bg-yellow-300 text-yellow-900":"",((y=e.request)==null?void 0:y.status)==="approved"?"bg-emerald-300 text-emerald-900":"",((h=e.request)==null?void 0:h.status)==="declined"?"bg-red-300 text-red-900":"",((b=e.request)==null?void 0:b.status)==="canceled"?"bg-gray-300 text-gray-900":""])},c(((q=e.request)==null?void 0:q.status)?e.request.status:"-"),3)])],8,oe)):g("",!0)}}}),me=$({props:{requests:Object},setup(e){return(t,o)=>(a(!0),x(D,null,F(e.requests,i=>(a(),k(ce,{key:i.id,request:i},null,8,["request"]))),128))}}),ge=s("div",{class:"sm:flex"},[s("div",{class:"sm:flex-auto"},[s("h1",{class:"text-xl font-semibold text-gray-900"},"Requests"),s("p",{class:"mt-2 text-sm text-gray-700"},"Select a request to handle the employees request.")])],-1),xe={class:"mt-4 flex justify-end"},fe={class:"relative z-0 inline-flex shadow-sm rounded-md"},pe={class:"mt-8 flex flex-col w-full"},ve={class:"-my-2 overflow-x-auto w-full"},ye={class:"inline-block min-w-full py-2 align-middle"},he={class:"overflow-hidden shadow border border-solid border-gray-300 md:rounded-lg"},be=V('<div class="grid grid-cols-11 border-b border-solid border-gray-300"><div class="col-span-2 py-3.5 pl-4 pr-3 sm:pl-6 text-left text-sm font-semibold text-gray-900">Employee</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Company</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Request Type</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Requested Date</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Administered By</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Status</div></div>',1),qe={key:0,class:"animate-spin ml-1 h-3 w-3 text-white mb-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},we=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Ce=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Pe=[we,Ce],ke=$({setup(e){const t=R({currentPage:0,hitsPerPage:30,total:0}),o=R("all"),i=R({limit:t.value.hitsPerPage,offset:t.value.currentPage*t.value.hitsPerPage}),{result:l,loading:f,fetchMore:p,onResult:C}=T(J,i.value);C(n=>{t.value.total=n.data.RequestCount});const P=()=>{t.value.currentPage+=1,p({variables:i.value,updateQuery:(n,{fetchMoreResult:r})=>r?N(A({},n),{Requests:[...n.Requests,...r.Requests],RequestCount:r.RequestCount}):n})},m=n=>{n!=="all"?i.value={limit:t.value.hitsPerPage,offset:t.value.currentPage*t.value.hitsPerPage,status:n}:i.value={limit:t.value.hitsPerPage,offset:t.value.currentPage*t.value.hitsPerPage},o.value=n,p({variables:i.value,updateQuery:(r,{fetchMoreResult:d})=>({Requests:d.Requests,RequestCount:d.RequestCount})})};return(n,r)=>{var d,v,y,h,b,q;return a(),x(D,null,[ge,s("div",xe,[s("span",fe,[s("button",{onClick:r[0]||(r[0]=()=>m("all")),class:w(["cursor-pointer font-bold relative inline-flex items-center px-4 py-2 rounded-l-md text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",o.value==="all"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," All ",2),s("button",{onClick:r[1]||(r[1]=()=>m("pending")),class:w(["cursor-pointer font-bold -ml-px relative inline-flex items-center px-4 py-2 text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",o.value==="pending"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," Pending ",2),s("button",{onClick:r[2]||(r[2]=()=>m("approved")),class:w(["cursor-pointer font-bold -ml-px relative inline-flex items-center px-4 py-2 text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",o.value==="approved"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," Approved ",2),s("button",{onClick:r[3]||(r[3]=()=>m("declined")),class:w(["cursor-pointer font-bold -ml-px relative inline-flex items-center px-4 py-2 rounded-r-md text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",o.value==="declined"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," Declined ",2)])]),s("div",pe,[s("div",ve,[s("div",ye,[s("div",he,[be,u(f)?(a(),k(M,{key:0})):g("",!0),!u(f)&&((v=(d=u(l))==null?void 0:d.Requests)==null?void 0:v.length)===0?(a(),k(se,{key:1})):g("",!0),u(l)?(a(),k(me,{key:2,requests:u(l).Requests},null,8,["requests"])):g("",!0)])])]),((h=(y=u(l))==null?void 0:y.Requests)==null?void 0:h.length)!==t.value.total&&!u(f)?(a(),x("button",{key:0,onClick:P,class:"cursor-pointer mt-6 inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 disabled:bg-indigo-400 disabled:cursor-not-allowed px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto"},[s("span",null,"Load more ("+c(t.value.total-((q=(b=u(l))==null?void 0:b.Requests)==null?void 0:q.length))+")",1),n.loadig?(a(),x("svg",qe,Pe)):g("",!0)])):g("",!0)])],64)}}}),Re=async()=>{const e=O({setup(){U(I,W)},render:()=>G(ke)});return e.use(H()),e.mount("#request-container")};Re().then(()=>{console.log()});
//# sourceMappingURL=requestsOverview.834f9d0e.js.map
