import{d as p,o as r,c,a as t,t as l,f as s,h as E,n as O,C as G,e as _,b as u,F as M,r as Y,u as K,x as Q,v as $,i as W,p as q,j as J,w as X,D as Z}from"./vendor.6feb70cb.js";import{_ as tt,u as U,L as et,a as st,b as ot,d as nt}from"./useApolloClient.ec8c64b5.js";import{f as b,_ as at,a as rt}from"./status--synced.3d792c61.js";const it={class:"mt-5 grid grid-cols-2 md:grid-cols-3 gap-3 lg:gap-5 lg:grid-cols-5"},lt={class:"px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"},dt=t("dt",{class:"text-sm font-medium text-gray-500 truncate text-center"}," Payment Date ",-1),ct={class:"mt-1 text-2xl font-semibold text-gray-900 text-center"},mt={class:"px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"},ut=t("dt",{class:"text-sm font-medium text-gray-500 truncate text-center"}," Total pay ",-1),pt={class:"mt-1 text-2xl font-semibold text-gray-900 text-center"},xt={class:"px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"},gt=t("dt",{class:"text-sm font-medium text-gray-500 truncate text-center"}," Tax ",-1),yt={class:"mt-1 text-2xl font-semibold text-gray-900 text-center"},ft={class:"px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"},ht=t("dt",{class:"text-sm font-medium text-gray-500 truncate text-center"}," Employee NI ",-1),_t={class:"mt-1 text-2xl font-semibold text-gray-900 text-center"},wt={class:"px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"},vt=t("dt",{class:"text-sm font-medium text-gray-500 truncate text-center"}," Employer NI ",-1),bt={class:"mt-1 text-2xl font-semibold text-gray-900 text-center"},$t=p({props:{payrun:Object},setup(e){return(d,n)=>{var o,i,a,w,v,x,g,m,y;return r(),c("dl",it,[t("div",lt,[dt,t("dd",ct,l((o=e.payrun)==null?void 0:o.paymentDate),1)]),t("div",mt,[ut,t("dd",pt," \xA3 "+l(s(b)((a=(i=e.payrun)==null?void 0:i.totals)==null?void 0:a.gross)),1)]),t("div",xt,[gt,t("dd",yt," \xA3 "+l(s(b)((v=(w=e.payrun)==null?void 0:w.totals)==null?void 0:v.tax)),1)]),t("div",ft,[ht,t("dd",_t," \xA3 "+l(s(b)((g=(x=e.payrun)==null?void 0:x.totals)==null?void 0:g.employeeNi)),1)]),t("div",wt,[vt,t("dd",bt," \xA3 "+l(s(b)((y=(m=e.payrun)==null?void 0:m.totals)==null?void 0:y.employerNi)),1)])])}}}),kt={},Ct={class:"mt-5 grid grid-cols-2 md:grid-cols-3 gap-3 lg:gap-5 lg:grid-cols-5"},Nt=E('<div class="px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"><dt class="text-sm font-medium text-gray-500 truncate text-center">Payment Date</dt><dd class="mt-1 text-2xl font-semibold text-gray-900 text-center"><svg class="animate-spin mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></dd></div><div class="px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"><dt class="text-sm font-medium text-gray-500 truncate text-center">Total pay</dt><dd class="mt-1 text-2xl font-semibold text-gray-900 text-center"><svg class="animate-spin mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></dd></div><div class="px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"><dt class="text-sm font-medium text-gray-500 truncate text-center">Tax</dt><dd class="mt-1 text-2xl font-semibold text-gray-900 text-center"><svg class="animate-spin mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></dd></div><div class="px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"><dt class="text-sm font-medium text-gray-500 truncate text-center">Employee NI</dt><dd class="mt-1 text-2xl font-semibold text-gray-900 text-center"><svg class="animate-spin mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></dd></div><div class="px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"><dt class="text-sm font-medium text-gray-500 truncate text-center">Employer NI</dt><dd class="mt-1 text-2xl font-semibold text-gray-900 text-center"><svg class="animate-spin mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></dd></div>',5),St=[Nt];function zt(e,d){return r(),c("dl",Ct,St)}var At=tt(kt,[["render",zt]]);const Rt={class:"fixed z-10 w-full h-full overflow-y-auto top-0 left-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Bt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Vt=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200B",-1),Dt={class:"relative inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6"},jt=t("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[t("svg",{class:"mt-2 h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),It={class:"mt-3 text-center sm:mt-5"},Lt=t("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},"An error has occured",-1),Pt={class:"mt-2"},Tt={class:"text-sm text-gray-500"},Ft={class:"mt-5 sm:mt-6"},Et=p({props:{error:String},emits:{close:Boolean},setup(e,{emit:d}){return(n,o)=>(r(),c("div",Rt,[t("div",Bt,[Vt,t("div",Dt,[t("div",null,[jt,t("div",It,[Lt,t("div",Pt,[t("p",Tt,l(e.error),1)])])]),t("div",Ft,[t("button",{onClick:o[0]||(o[0]=i=>d("close")),type:"button",class:"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm"},"Go back to the pay run")])])])]))}}),Mt={method:"post","accept-charset":"UTF-8",enctype:"multipart/form-data",class:"inline-flex"},Ut=["value"],Ht=t("input",{type:"hidden",name:"action",value:"staff-management/pay-run/import"},null,-1),Ot=["value"],Gt=["value"],Yt=t("input",{type:"file",class:"fixed top-full",name:"file",id:"attendee-csv-file",accept:".csv",onchange:"this.form.submit();"},null,-1),Kt=t("label",{for:"attendee-csv-file",class:"cursor-pointer inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto"},"Upload CSV To Staffology",-1),Qt=p({props:{payrun:Object},setup(e){const d=window.api.csrf;return(n,o)=>{var i,a;return r(),c("form",Mt,[t("input",{type:"hidden",name:"CRAFT_CSRF_TOKEN",value:s(d)},null,8,Ut),Ht,t("input",{type:"hidden",name:"payRunId",value:(i=e.payrun)==null?void 0:i.id},null,8,Ot),t("input",{type:"hidden",name:"employerId",value:(a=e.payrun)==null?void 0:a.employerId},null,8,Gt),Yt,Kt])}}}),Wt={class:"grid grid-cols-7 border-b border-solid border-gray-200"},qt={class:"col-span-2 whitespace-nowrap px-3 py-4 flex text-sm text-gray-500"},Jt={class:"whitespace-nowrap px-3 py-4 flex text-sm text-gray-500"},Xt={class:"col-span-2 whitespace-nowrap px-3 py-4 flex text-sm text-gray-500"},Zt={class:"whitespace-nowrap px-3 py-4 flex text-sm text-gray-500"},te={class:"items-center px-3 py-2 flex"},ee=p({props:{log:Object},setup(e){const d=o=>(o==null?void 0:o.firstName)||(o==null?void 0:o.lastName)?`${o.firstName} ${o.lastName}`:o.username,n=o=>{var a;const i={Succeeded:"bg-emerald-400 text-emerald-900",Failed:"bg-red-400 text-red-900",default:"bg-orange-400 text-orange-900"};return(a=i[o.status])!=null?a:i.default};return(o,i)=>(r(),c("div",Wt,[t("div",qt,l(e.log.filename),1),t("div",Jt,l(e.log.rowCount),1),t("div",Xt,l(d(e.log)),1),t("div",Zt,l(e.log.dateCreated),1),t("div",te,[t("div",{class:O(["whitespace-nowrap rounded-full text-xs inline-block px-3 py-1 mb-0 font-bold",n(e.log)])},l(e.log.status?e.log.status:"Unknown"),3)])]))}}),se={class:"mt-8 flex flex-col w-full"},oe={class:"-my-2 overflow-x-auto w-full"},ne={class:"inline-block min-w-full py-2 align-middle"},ae={class:"overflow-hidden border border-solid border-gray-300 md:rounded-lg"},re=E('<div class="grid grid-cols-7 border-b border-solid border-gray-300"><div class="col-span-2 py-3 px-3 text-left text-sm font-semibold text-gray-900">Filename</div><div class="py-3 px-3 text-left text-sm font-semibold text-gray-900">Row count</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Uploaded By</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Uploaded</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Status</div></div>',1),ie=p({props:{payrun:String},setup(e){const d=e,n=U();return G(()=>{d.payrun&&st(d.payrun)}),(o,i)=>(r(),c("div",se,[t("div",oe,[t("div",ne,[t("div",ae,[re,e.payrun?u("",!0):(r(),_(et,{key:0})),(r(!0),c(M,null,Y(s(n).logs,a=>(r(),_(ee,{key:a.id,log:a},null,8,["log"]))),128))])])])]))}}),le={class:"md:flex items-start"},de={class:"flex-grow pr-4",style:{"margin-bottom":"0"}},ce={class:"flex items-center"},me=["href"],ue={class:"ml-2 text-xl font-semibold text-gray-900"},pe=t("p",{class:"mt-2 text-sm text-gray-700"},"Download the current pay run CSV using the Download button below. When uploading, ensure table headings and the file format (CSV) remain unchanged.",-1),xe={class:"mt-4 md:mt-0 flex",style:{"margin-bottom":"0"}},ge=["disabled"],ye=t("span",null,"Refresh Pay Run",-1),fe={key:0,class:"animate-spin ml-1 h-3 w-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",style:{"margin-bottom":"0"}},he=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),_e=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),we=[he,_e],ve={class:"mt-8"},be={class:"mt-8 flex"},$e={class:"sm:flex-auto",style:{"margin-bottom":"0"}},ke=t("h2",null,"Uploaded Pay Run Entries",-1),Ce={class:"mt-4 md:mt-0 text-xs inline-flex mr-2 flex-grow",style:{"margin-bottom":"0"}},Ne={key:1,class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none space-x-2",style:{"margin-bottom":"0"}},Se=p({setup(e){var x;const d=window.location.href.split("/").pop(),{result:n,loading:o}=K(rt,{id:d},{pollInterval:5e3}),i=U(),a=Q((x=window==null?void 0:window.validation)==null?void 0:x.error),w=g=>{const m=`/admin/staff-management/pay-runs/download-template/${g}`;window.open(m)},v=()=>{a.value=""};return(g,m)=>{var y,k,C,N,S,z,A,R,B,V,D,j,I,L,P,T,F;return r(),c(M,null,[t("div",le,[t("div",de,[t("div",ce,[t("a",{href:`/admin/staff-management/pay-runs/${(k=(y=s(n))==null?void 0:y.payrun)==null?void 0:k.employerId}`,title:"Go back to overview",class:"inline-flex no-underline items-center px-2.5 py-1.5 rounded-full text-sm text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",style:{"margin-bottom":"0"}},"\u2190",8,me),t("h1",ue,l((N=(C=s(n))==null?void 0:C.payrun)==null?void 0:N.taxYear)+" / "+l((z=(S=s(n))==null?void 0:S.payrun)==null?void 0:z.period),1)]),pe]),t("div",xe,[$(at,{date:(R=(A=s(n))==null?void 0:A.payrun)==null?void 0:R.dateSynced},null,8,["date"]),t("button",{onClick:m[0]||(m[0]=H=>{var f,h;return s(ot)((h=(f=s(n))==null?void 0:f.payrun)==null?void 0:h.id)}),disabled:s(i).loadingFetched,class:"cursor-pointer inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 disabled:bg-indigo-400 disabled:cursor-not-allowed px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",style:{"margin-bottom":"0"}},[ye,s(i).loadingFetched?(r(),c("svg",fe,we)):u("",!0)],8,ge)])]),t("div",ve,[((B=s(n))==null?void 0:B.payrun)?u("",!0):(r(),_(At,{key:0})),((V=s(n))==null?void 0:V.payrun)?(r(),_($t,{key:1,payrun:(D=s(n))==null?void 0:D.payrun},null,8,["payrun"])):u("",!0)]),t("div",be,[a.value?(r(),_(Et,{key:0,error:a.value,onClose:v},null,8,["error"])):u("",!0),t("div",$e,[ke,t("span",Ce," Last Synced: "+l((I=(j=s(n))==null?void 0:j.payrun)==null?void 0:I.dateSynced),1)]),((L=s(n))==null?void 0:L.payrun)?(r(),c("div",Ne,[t("button",{onClick:m[1]||(m[1]=H=>{var f,h;return w((h=(f=s(n))==null?void 0:f.payrun)==null?void 0:h.id)}),class:"cursor-pointer inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},"Download Latest Pay Run Template"),$(Qt,{payrun:(P=s(n))==null?void 0:P.payrun},null,8,["payrun"])])):u("",!0),$(ie,{payrun:(F=(T=s(n))==null?void 0:T.payrun)==null?void 0:F.id},null,8,["payrun"])])],64)}}}),ze=async()=>{const e=W({setup(){q(Z,nt)},render:()=>J(Se)});return e.use(X()),e.mount("#detail-container")};ze().then(()=>{console.log()});
//# sourceMappingURL=details.b93f8fff.js.map
