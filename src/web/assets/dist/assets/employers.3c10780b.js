var _=Object.defineProperty,v=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var y=(e,t,o)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,u=(e,t)=>{for(var o in t||(t={}))b.call(t,o)&&y(e,o,t[o]);if(p)for(var o of p(t))k.call(t,o)&&y(e,o,t[o]);return e},x=(e,t)=>v(e,w(t));import{g as $,o as a,c,a as s,d as m,t as n,r as C,F as g,b as d,u as L,e as i,f as h,h as E,i as P,H as j,s as B,j as N,A as R,I as S,k as A,l as D,p as O,m as Y,n as H,D as U}from"./vendor.bb42b6a3.js";const V=$`
    query Employers {
        employers {
            id
            crn
            name
            employeeCount
            currentYear
            logoUrl
            dateSynced:dateUpdated @formatDateTime(format:"Y-m-d H:i")
            currentPayRun{
                taxYear
                period
            }
        }
    }
`;var q=(e,t)=>{const o=e.__vccOpts||e;for(const[r,l]of t)o[r]=l;return o};const z={},I={class:"flex items-center justify-center p-4 border-b border-solid border-gray-200"},M=s("svg",{class:"animate-spin mr-3 h-5 w-5 text-indigo-900",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),T=s("span",{class:"text-base"}," Loading data ... ",-1),F=[M,T];function Q(e,t){return a(),c("div",I,F)}var G=q(z,[["render",Q]]);const J=["href","title"],K={class:"col-span-2 whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-indigo-800 sm:pl-6 flex"},W={class:"object-cover object-center w-6 h-6 rounded-full overflow-hidden mb-0"},X=["src"],Z={style:{"margin-bottom":"0"}},ee={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},te={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},oe={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},se={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},re=m({props:{employer:Object},setup(e){return(t,o)=>{var r,l;return a(),c("a",{href:`/admin/staff-management/pay-runs/${e.employer.id}`,title:`Go to pay runs of ${e.employer.name}`,class:"grid grid-cols-6 border-b border-solid border-gray-200 no-underline hover:bg-gray-200"},[s("div",K,[s("div",W,[s("img",{src:e.employer.logoUrl,class:"w-full h-full"},null,8,X)]),s("span",Z,n(e.employer.name),1)]),s("div",ee,n(e.employer.crn?e.employer.crn:"-"),1),s("div",te,n(e.employer.employeeCount),1),s("div",oe,n((r=e.employer.currentPayRun)==null?void 0:r.taxYear)+" / "+n((l=e.employer.currentPayRun)==null?void 0:l.period),1),s("div",se,n(e.employer.dateSynced),1)],8,J)}}}),ae=m({props:{employers:Object},setup(e){return(t,o)=>(a(!0),c(g,null,C(e.employers,r=>(a(),d(re,{key:r.id,employer:r},null,8,["employer"]))),128))}}),ne=s("div",{class:"sm:flex"},[s("div",{class:"sm:flex-auto"},[s("h1",{class:"text-xl font-semibold text-gray-900"},"Employers"),s("p",{class:"mt-2 text-sm text-gray-700"},"Select a company below to begin bulk pay run management.")])],-1),le={class:"mt-8 flex flex-col w-full"},ce={class:"-my-2 overflow-x-auto w-full"},ie={class:"inline-block min-w-full py-2 align-middle"},de={class:"overflow-hidden shadow border border-solid border-gray-300 md:rounded-lg"},me=E('<div class="grid grid-cols-6 border-b border-solid border-gray-300"><div class="col-span-2 py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6">Company</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">CRN</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Employee count</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Current Pay Run</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Last synced</div></div>',1),pe=m({setup(e){const{result:t,loading:o}=L(V);return(r,l)=>(a(),c(g,null,[ne,s("div",le,[s("div",ce,[s("div",ie,[s("div",de,[me,i(o)?(a(),d(G,{key:0})):h("",!0),i(t)?(a(),d(ae,{key:1,employers:i(t).employers},null,8,["employers"])):h("",!0)])])])])],64))}});var f;const ye=(f=window.api.cpUrl)!=null?f:"https://localhost:8003",ue=async()=>{let e={value:null};return await P({method:"get",url:`${ye}/staff-management/settings/get-gql-token`}).then(t=>{var o;e.value=((o=t==null?void 0:t.data)==null?void 0:o.token)?t.data.token:null}),e.value||null},xe=new j({uri:"http://localhost:8001/api",credentials:"include"}),he=B(async(e,{headers:t})=>{const o=await ue();return{headers:x(u({},t),{authorization:`Bearer ${o}`})}}),fe=N(({graphQLErrors:e,networkError:t,operation:o,forward:r})=>{}),ge=new R({cache:new S,link:A([fe,he,xe])}),_e=async()=>{const e=D({setup(){O(U,ge)},render:()=>Y(pe)});return e.use(H()),e.mount("#employer-container")};_e().then(()=>{console.log()});
//# sourceMappingURL=employers.3c10780b.js.map
