import{d as h,o as n,c as i,r as v,F as _,a as e,n as w,t as r,f as s,u as k,q as y,b as c,e as $,h as C,i as D,p as P,j as S,v as A,D as B}from"./vendor.c43b4d0a.js";import{u as F,f as L,L as R,d as I}from"./useApolloClient.a9f4758e.js";import{f as N,_ as V,P as j}from"./status--synced.d2a253df.js";const z=["href","title"],E={class:"flex items-center whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-indigo-800 sm:pl-6"},O={class:"hide lg:flex lg:items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},T={class:"hide lg:flex lg:items-center col-span-2 whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Y={class:"hide lg:flex lg:items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},q={class:"flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},G={class:"flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},H=h({props:{payrunData:Object},setup(l){return(p,o)=>(n(!0),i(_,null,v(l.payrunData,t=>(n(),i("a",{key:t.id,href:`/admin/staff-management/pay-runs/${t.employerId}/${t.id}`,title:`Go to pay run ${t.period}/${t.taxYear}`,class:"grid grid-cols-4 lg:grid-cols-7 border-b border-solid border-gray-200 no-underline hover:bg-gray-200"},[e("div",E,[e("span",{class:w(["rounded-full w-5 h-5 fond-bold flex items-center justify-center mb-0",t.state=="Open"?"border-2 border-solid border-emrald-500 text-emerald-500":"",t.state=="Closed"?"border-2 border-solid border-green-500 text-white bg-emerald-500":"",t.state=="Finalised"?"border-2 border-solid border-green-500 text-white bg-emerald-500":""])},r(t.period),3)]),e("div",O,r(t.employeeCount),1),e("div",T,r(t.startDate)+" - "+r(t.endDate),1),e("div",Y,"\xA3 "+r(s(N)(t.totals.totalCost)),1),e("div",q,r(t.paymentDate),1),e("div",G,r(t.dateSynced),1)],8,z))),128))}}),M={key:0,class:"md:flex items-start"},Q={class:"flex-grow pr-4",style:{"margin-bottom":"0"}},U={class:"flex items-center"},J=["title"],K={class:"ml-1 text-xl font-semibold text-gray-900"},W={class:"mt-2 text-sm text-gray-700"},X={class:"mt-4 md:mt-0 flex",style:{"margin-bottom":"0"}},Z=["disabled"],ee=e("span",null,"Refresh Pay Runs",-1),te={key:0,class:"animate-spin ml-1 h-3 w-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",style:{"margin-bottom":"0"}},se=e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),oe=e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),re=[se,oe],ne={key:1,class:"mt-8 flex flex-col w-full"},ie={class:"-my-2 overflow-x-auto w-full"},ae={class:"inline-block min-w-full py-2 align-middle"},le={class:"overflow-hidden shadow border border-solid border-gray-300 md:rounded-lg"},de=C('<div class="grid grid-cols-4 lg:grid-cols-7 border-b border-solid border-gray-300"><div class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6">Period</div><div class="hide lg:block px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Entries</div><div class="hide lg:block col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Dates</div><div class="hide lg:block px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Cost</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Pay Date</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Last synced</div></div>',1),ce={key:1,class:"grid grid-cols-7 border-b border-solid border-gray-200 py-4 px-3 text-center"},me=e("div",{class:"col-span-7"},"There are currently no pay runs for this employer",-1),pe=[me],ge=h({setup(l){const p=window.location.href.split("/").pop(),{result:o,loading:t}=k(j,{employerId:p},{pollInterval:5e3}),u=F(),b=g=>{if(!g)return"unknown";const d=g.map(a=>a.dateSynced).sort((a,m)=>a<m);return d.length>0?d[0]:"unknown"};return(g,d)=>{var a,m,f;return n(),i(_,null,[s(o)?(n(),i("div",M,[e("div",Q,[e("div",U,[e("a",{href:"/admin/staff-management/pay-runs",title:`Back to ${(a=s(o).payruns[0])==null?void 0:a.employer}`,class:"inline-flex no-underline items-center px-2.5 py-1.5 rounded-full text-sm text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",style:{"margin-bottom":"0"}},"\u2190",8,J),e("h1",K,r((m=s(o).payruns[0])==null?void 0:m.employer),1)]),e("p",W,"The table below shows payrun overviews for "+r((f=s(o).payruns[0])==null?void 0:f.employer)+". If a payrun has recently been setup in Staffology but does not yet appear below, click the Fetch\xA0Pay\xA0Runs button to update. ",1)]),e("div",X,[y(V,{date:b(s(o).payruns)},null,8,["date"]),e("button",{onClick:d[0]||(d[0]=fe=>{var x;return s(L)((x=s(o).payruns[0])==null?void 0:x.employerId)}),disabled:s(u).loadingFetched,class:"cursor-pointer inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 disabled:bg-indigo-400 disabled:cursor-not-allowed px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",style:{"margin-bottom":"0"}},[ee,s(u).loadingFetched?(n(),i("svg",te,re)):c("",!0)],8,Z)])])):c("",!0),s(o)?(n(),i("div",ne,[e("div",ie,[e("div",ae,[e("div",le,[de,s(t)?(n(),$(R,{key:0})):c("",!0),!s(t)&&s(o).payruns.length===0?(n(),i("div",ce,pe)):c("",!0),y(H,{"payrun-data":s(o).payruns},null,8,["payrun-data"])])])])])):c("",!0)],64)}}}),ue=async()=>{const l=D({setup(){P(B,I)},render:()=>S(ge)});return l.use(A()),l.mount("#payruns-container")};ue().then(()=>{console.log()});
//# sourceMappingURL=payruns.c3d5e7a9.js.map
