import{d as x,o as n,c as d,a as t,t as a,f as o,h as M,n as Y,w as G,e as _,b as u,F as U,r as q,q as K,u as Q,v as W,x as $,i as J,j as X,y as Z,p as tt,D as et}from"./vendor.a01131e1.js";import{u as H,g as st,f as ot,d as nt}from"./useApolloClient.4f887e84.js";import{f as b,_ as rt,P as at}from"./status--synced.0b3f8fc9.js";import{_ as it,L as lt}from"./listitem--loading.69eca668.js";const dt={class:"mt-5 grid grid-cols-2 md:grid-cols-3 gap-3 lg:gap-5 lg:grid-cols-5"},ct={class:"px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"},mt=t("dt",{class:"text-sm font-medium text-gray-500 truncate text-center"}," Payment Date ",-1),ut={class:"mt-1 text-2xl font-semibold text-gray-900 text-center"},pt={class:"px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"},xt=t("dt",{class:"text-sm font-medium text-gray-500 truncate text-center"}," Total pay ",-1),gt={class:"mt-1 text-2xl font-semibold text-gray-900 text-center"},yt={class:"px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"},ft=t("dt",{class:"text-sm font-medium text-gray-500 truncate text-center"}," Tax ",-1),ht={class:"mt-1 text-2xl font-semibold text-gray-900 text-center"},_t={class:"px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"},vt=t("dt",{class:"text-sm font-medium text-gray-500 truncate text-center"}," Employee NI ",-1),wt={class:"mt-1 text-2xl font-semibold text-gray-900 text-center"},bt={class:"px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"},$t=t("dt",{class:"text-sm font-medium text-gray-500 truncate text-center"}," Employer NI ",-1),kt={class:"mt-1 text-2xl font-semibold text-gray-900 text-center"},Ct=x({props:{payrun:Object},setup(s){return(i,c)=>{var e,l,r,p,v,w,g,y,m;return n(),d("dl",dt,[t("div",ct,[mt,t("dd",ut,a((e=s.payrun)==null?void 0:e.paymentDate),1)]),t("div",pt,[xt,t("dd",gt," \xA3 "+a(o(b)((r=(l=s.payrun)==null?void 0:l.totals)==null?void 0:r.gross)),1)]),t("div",yt,[ft,t("dd",ht," \xA3 "+a(o(b)((v=(p=s.payrun)==null?void 0:p.totals)==null?void 0:v.tax)),1)]),t("div",_t,[vt,t("dd",wt," \xA3 "+a(o(b)((g=(w=s.payrun)==null?void 0:w.totals)==null?void 0:g.employeeNi)),1)]),t("div",bt,[$t,t("dd",kt," \xA3 "+a(o(b)((m=(y=s.payrun)==null?void 0:y.totals)==null?void 0:m.employerNi)),1)])])}}}),Nt={},St={class:"mt-5 grid grid-cols-2 md:grid-cols-3 gap-3 lg:gap-5 lg:grid-cols-5"},zt=M('<div class="px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"><dt class="text-sm font-medium text-gray-500 truncate text-center">Payment Date</dt><dd class="mt-1 text-2xl font-semibold text-gray-900 text-center"><svg class="animate-spin mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></dd></div><div class="px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"><dt class="text-sm font-medium text-gray-500 truncate text-center">Total pay</dt><dd class="mt-1 text-2xl font-semibold text-gray-900 text-center"><svg class="animate-spin mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></dd></div><div class="px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"><dt class="text-sm font-medium text-gray-500 truncate text-center">Tax</dt><dd class="mt-1 text-2xl font-semibold text-gray-900 text-center"><svg class="animate-spin mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></dd></div><div class="px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"><dt class="text-sm font-medium text-gray-500 truncate text-center">Employee NI</dt><dd class="mt-1 text-2xl font-semibold text-gray-900 text-center"><svg class="animate-spin mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></dd></div><div class="px-4 py-5 bg-gray-200 shadow rounded-lg overflow-hidden sm:p-6"><dt class="text-sm font-medium text-gray-500 truncate text-center">Employer NI</dt><dd class="mt-1 text-2xl font-semibold text-gray-900 text-center"><svg class="animate-spin mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></dd></div>',5),At=[zt];function Rt(s,i){return n(),d("dl",St,At)}var Bt=it(Nt,[["render",Rt]]);const Vt={class:"fixed z-10 w-full h-full overflow-y-auto top-0 left-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Dt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Pt=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200B",-1),Tt={class:"relative inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6"},jt=t("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[t("svg",{class:"mt-2 h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),It={class:"mt-3 text-center sm:mt-5"},Lt=t("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},"An error has occured",-1),Ft={class:"mt-2"},Et={class:"text-sm text-gray-500"},Mt={class:"mt-5 sm:mt-6"},Ut=x({props:{error:String},emits:{close:Boolean},setup(s,{emit:i}){return(c,e)=>(n(),d("div",Vt,[t("div",Dt,[Pt,t("div",Tt,[t("div",null,[jt,t("div",It,[Lt,t("div",Ft,[t("p",Et,a(s.error),1)])])]),t("div",Mt,[t("button",{onClick:e[0]||(e[0]=l=>i("close")),type:"button",class:"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm"},"Go back to the pay run")])])])]))}}),Ht={method:"post","accept-charset":"UTF-8",enctype:"multipart/form-data",class:"inline-flex"},Ot=["value"],Yt=t("input",{type:"hidden",name:"action",value:"staff-management/pay-run/import"},null,-1),Gt=["value"],qt=["value"],Kt=t("input",{type:"file",class:"fixed top-full",name:"file",id:"attendee-csv-file",accept:".csv",onchange:"this.form.submit();"},null,-1),Qt=t("label",{for:"attendee-csv-file",class:"cursor-pointer inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto"},"Upload CSV To Staffology",-1),Wt=x({props:{payrun:Object},setup(s){const i=window.api.csrf;return(c,e)=>{var l,r;return n(),d("form",Ht,[t("input",{type:"hidden",name:"CRAFT_CSRF_TOKEN",value:o(i)},null,8,Ot),Yt,t("input",{type:"hidden",name:"payRunId",value:(l=s.payrun)==null?void 0:l.id},null,8,Gt),t("input",{type:"hidden",name:"employerId",value:(r=s.payrun)==null?void 0:r.employerId},null,8,qt),Kt,Qt])}}}),Jt={class:"grid grid-cols-7 border-b border-solid border-gray-200"},Xt={class:"col-span-2 whitespace-nowrap px-3 py-4 flex text-sm text-gray-500"},Zt={class:"whitespace-nowrap px-3 py-4 flex text-sm text-gray-500"},te={class:"col-span-2 whitespace-nowrap px-3 py-4 flex text-sm text-gray-500"},ee={class:"whitespace-nowrap px-3 py-4 flex text-sm text-gray-500"},se={class:"items-center px-3 py-2 flex"},oe=x({props:{log:Object},setup(s){const i=e=>(e==null?void 0:e.firstName)||(e==null?void 0:e.lastName)?`${e.firstName} ${e.lastName}`:e.username,c=e=>{var r;const l={Succeeded:"bg-emerald-400 text-emerald-900",Failed:"bg-red-400 text-red-900",default:"bg-orange-400 text-orange-900"};return(r=l[e.status])!=null?r:l.default};return(e,l)=>(n(),d("div",Jt,[t("div",Xt,a(s.log.filename),1),t("div",Zt,a(s.log.rowCount),1),t("div",te,a(i(s.log)),1),t("div",ee,a(s.log.dateCreated),1),t("div",se,[t("div",{class:Y(["whitespace-nowrap rounded-full text-xs inline-block px-3 py-1 mb-0 font-bold",c(s.log)])},a(s.log.status?s.log.status:"Unknown"),3)])]))}}),ne={class:"mt-8 flex flex-col w-full"},re={class:"-my-2 overflow-x-auto w-full"},ae={class:"inline-block min-w-full py-2 align-middle"},ie={class:"overflow-hidden border border-solid border-gray-300 md:rounded-lg"},le=M('<div class="grid grid-cols-7 border-b border-solid border-gray-300"><div class="col-span-2 py-3 px-3 text-left text-sm font-semibold text-gray-900">Filename</div><div class="py-3 px-3 text-left text-sm font-semibold text-gray-900">Row count</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Uploaded By</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Uploaded</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Status</div></div>',1),de={key:1,class:"grid grid-cols-7 border-b border-solid border-gray-200 py-4 px-3 text-center"},ce=t("div",{class:"col-span-7"},"There are currently no logs for this pay run",-1),me=[ce],ue=x({props:{payrun:String},setup(s){const i=s,c=H();return G(()=>{i.payrun&&st(i.payrun)}),(e,l)=>(n(),d("div",ne,[t("div",re,[t("div",ae,[t("div",ie,[le,s.payrun?u("",!0):(n(),_(lt,{key:0})),s.payrun&&o(c).logs.length===0?(n(),d("div",de,me)):u("",!0),(n(!0),d(U,null,q(o(c).logs,r=>(n(),_(oe,{key:r.id,log:r},null,8,["log"]))),128))])])])]))}}),pe={class:"md:flex items-start"},xe={class:"flex-grow pr-4",style:{"margin-bottom":"0"}},ge={class:"flex items-center"},ye=["href"],fe={class:"ml-2 text-xl font-semibold text-gray-900"},he=t("p",{class:"mt-2 text-sm text-gray-700"},"Download the current pay run CSV using the Download button below. When uploading, ensure table headings and the file format (CSV) remain unchanged.",-1),_e={class:"mt-4 md:mt-0 flex",style:{"margin-bottom":"0"}},ve=["disabled"],we=t("span",null,"Refresh Pay Run",-1),be={key:0,class:"animate-spin ml-1 h-3 w-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",style:{"margin-bottom":"0"}},$e=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ke=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Ce=[$e,ke],Ne={class:"mt-8"},Se={class:"mt-8 flex"},ze={class:"sm:flex-auto",style:{"margin-bottom":"0"}},Ae=t("h2",null,"Uploaded Pay Run Entries",-1),Re={class:"mt-4 md:mt-0 text-xs inline-flex mr-2 flex-grow",style:{"margin-bottom":"0"}},Be={key:1,class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none space-x-2",style:{"margin-bottom":"0"}},Ve=x({setup(s){var g;const i=window.location.href.split("/").pop(),c=K({current:window.location.href.split("/").at(-2)}),{result:e,loading:l}=Q(at,{id:i},{pollInterval:5e3}),r=H(),p=W((g=window==null?void 0:window.validation)==null?void 0:g.error),v=y=>{const m=`/admin/staff-management/pay-runs/download-template/${y}`;window.open(m)},w=()=>{p.value=""};return(y,m)=>{var k,C,N,S,z,A,R,B,V,D,P,T,j,I,L,F,E;return n(),d(U,null,[t("div",pe,[t("div",xe,[t("div",ge,[t("a",{href:`/admin/staff-management/pay-runs/${(C=(k=o(e))==null?void 0:k.payrun)==null?void 0:C.employerId}/${o(c).current}`,title:"Go back to overview",class:"inline-flex no-underline items-center px-2.5 py-1.5 rounded-full text-sm text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",style:{"margin-bottom":"0"}},"\u2190",8,ye),t("h1",fe,a((S=(N=o(e))==null?void 0:N.payrun)==null?void 0:S.taxYear)+" / "+a((A=(z=o(e))==null?void 0:z.payrun)==null?void 0:A.period),1)]),he]),t("div",_e,[$(rt,{date:(B=(R=o(e))==null?void 0:R.payrun)==null?void 0:B.dateSynced},null,8,["date"]),t("button",{onClick:m[0]||(m[0]=O=>{var f,h;return o(ot)((h=(f=o(e))==null?void 0:f.payrun)==null?void 0:h.id,o(c).current)}),disabled:o(r).loadingFetched,class:"cursor-pointer inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 disabled:bg-indigo-400 disabled:cursor-not-allowed px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",style:{"margin-bottom":"0"}},[we,o(r).loadingFetched?(n(),d("svg",be,Ce)):u("",!0)],8,ve)])]),t("div",Ne,[((V=o(e))==null?void 0:V.payrun)?u("",!0):(n(),_(Bt,{key:0})),((D=o(e))==null?void 0:D.payrun)?(n(),_(Ct,{key:1,payrun:(P=o(e))==null?void 0:P.payrun},null,8,["payrun"])):u("",!0)]),t("div",Se,[p.value?(n(),_(Ut,{key:0,error:p.value,onClose:w},null,8,["error"])):u("",!0),t("div",ze,[Ae,t("span",Re," Last Synced: "+a((j=(T=o(e))==null?void 0:T.payrun)==null?void 0:j.dateSynced),1)]),((I=o(e))==null?void 0:I.payrun)?(n(),d("div",Be,[t("button",{onClick:m[1]||(m[1]=O=>{var f,h;return v((h=(f=o(e))==null?void 0:f.payrun)==null?void 0:h.id)}),class:"cursor-pointer inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},"Download Latest Pay Run Template"),$(Wt,{payrun:(L=o(e))==null?void 0:L.payrun},null,8,["payrun"])])):u("",!0),$(ue,{payrun:(E=(F=o(e))==null?void 0:F.payrun)==null?void 0:E.id},null,8,["payrun"])])],64)}}}),De=async()=>{const s=J({setup(){tt(et,nt)},render:()=>X(Ve)});return s.use(Z()),s.mount("#detail-container")};De().then(()=>{console.log()});
//# sourceMappingURL=details.b000784b.js.map
