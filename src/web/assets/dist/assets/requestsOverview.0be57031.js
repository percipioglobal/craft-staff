import{o as i,b as f,e,d as C,t as m,f as g,n as q,i as A,g as P,F as $,a as k,u as d,I as z,l as D,h as N,p as L}from"./vue.esm-bundler.11cac8fc.js";import{u as B,k as S,d as j,D as E}from"./useApolloClient.2a7a9d07.js";import{R as Q}from"./requests.e2aafd32.js";import{_ as F,L as O}from"./listitem--loading.4b7e0850.js";import"./index.638a625a.js";const T={},V={class:"flex items-center justify-center p-4 border-b border-solid border-gray-200"},G=e("span",{class:"text-base"}," No results found ",-1),H=[G];function I(t,s){return i(),f("div",V,H)}var U=F(T,[["render",I]]);const J=["href","title"],K={class:"col-span-2 flex items-center whitespace-nowrap pl-4 pr-3 sm:pl-6 py-4 text-sm text-gray-500"},M={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},W={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500 capitalize"},X={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Y={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Z={class:"mb-0"},ee={key:0,class:"block mb-0"},te={class:"flex items-center whitespace-nowrap px-3 pr-3 py-4 text-sm"},se=C({__name:"listitem--request",props:{request:null},setup(t){return(s,u)=>{var r,a,x,p,_,w,c,n,o,l,h,v,b,y;return t.request?(i(),f("a",{key:0,href:`/admin/staff-management/requests/${t.request.id}`,title:`Go to request ${t.request.id}`,class:"grid grid-cols-11 border-b border-solid border-gray-200 no-underline hover:bg-gray-200"},[e("div",K,m((x=(a=(r=t.request)==null?void 0:r.employee)==null?void 0:a.personalDetails)!=null&&x.firstName?t.request.employee.personalDetails.firstName+" "+t.request.employee.personalDetails.lastName:"-"),1),e("div",M,m((p=t.request)!=null&&p.employer?t.request.employer:"-"),1),e("div",W,m((_=t.request)!=null&&_.type?t.request.type.replace("_"," "):"-"),1),e("div",X,m((w=t.request)!=null&&w.dateCreated?t.request.dateCreated:"-"),1),e("div",Y,[e("span",Z,m((c=t.request)!=null&&c.admin?t.request.admin:"-"),1),((n=t.request)==null?void 0:n.admin)&&((o=t.request)==null?void 0:o.dateAdministered)?(i(),f("span",ee," on the "+m((l=t.request)!=null&&l.dateAdministered?t.request.dateAdministered:"-"),1)):g("",!0)]),e("div",te,[e("span",{class:q(["rounded-full w-3 h-3 mb-0",((h=t.request)==null?void 0:h.status)==="pending"?"bg-yellow-300 text-yellow-900":"",((v=t.request)==null?void 0:v.status)==="approved"?"bg-emerald-300 text-emerald-900":"",((b=t.request)==null?void 0:b.status)==="declined"?"bg-red-300 text-red-900":"",((y=t.request)==null?void 0:y.status)==="canceled"?"bg-gray-300 text-gray-900":""])}," \xA0 ",2)])],8,J)):g("",!0)}}}),oe=C({__name:"list--requests",props:{requests:Object},setup(t){return(s,u)=>(i(!0),f($,null,A(t.requests,r=>(i(),P(se,{key:r.id,request:r},null,8,["request"]))),128))}}),ne=e("div",{class:"sm:flex"},[e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-xl font-semibold text-gray-900"},"Requests"),e("p",{class:"mt-2 text-sm text-gray-700"},"Select a request to handle the employees request.")])],-1),re={class:"mt-4 flex justify-end"},ie={class:"relative z-0 inline-flex shadow-sm rounded-md"},ae=e("span",{class:"mb-0"},"All",-1),le=[ae],de=e("span",{class:"mb-0"},"Pending",-1),ue=e("span",{class:"rounded-full w-3 h-3 bg-yellow-300 mb-0"},"\xA0",-1),ce=[de,ue],me=e("span",{class:"mb-0"},"Approved",-1),ge=e("span",{class:"rounded-full w-3 h-3 bg-emerald-300 mb-0"},"\xA0",-1),fe=[me,ge],xe=e("span",{class:"mb-0"},"Declined",-1),pe=e("span",{class:"rounded-full w-3 h-3 bg-red-300 mb-0"},"\xA0",-1),he=[xe,pe],ve={class:"mt-8 flex flex-col w-full"},be={class:"-my-2 overflow-x-auto w-full"},ye={class:"inline-block min-w-full overflow-scroll py-2 align-middle"},qe={class:"shadow border border-solid border-gray-300 md:rounded-lg"},_e=z('<div class="grid grid-cols-11 border-b border-solid border-gray-300"><div class="col-span-2 py-3.5 pl-4 pr-3 sm:pl-6 text-left text-sm font-semibold text-gray-900">Employee</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Company</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Request Type</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Requested Date</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Administered By</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Status</div></div>',1),we={key:0,class:"animate-spin ml-1 h-3 w-3 text-white mb-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Pe=e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ke=e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Ce=[Pe,ke],Re=C({__name:"Requests",setup(t){const s=k({currentPage:0,hitsPerPage:30,total:0}),u=k("all"),r=k({limit:s.value.hitsPerPage,offset:s.value.currentPage*s.value.hitsPerPage}),{result:a,loading:x,fetchMore:p,onResult:_}=B(Q,r.value);_(n=>{s.value.total=n.data.RequestCount});const w=()=>{s.value.currentPage+=1,r.value={limit:s.value.hitsPerPage,offset:s.value.currentPage*s.value.hitsPerPage},p({variables:r.value,updateQuery:(n,{fetchMoreResult:o})=>o?{...n,Requests:[...n.Requests,...o.Requests],RequestCount:o.RequestCount}:n})},c=n=>{n!=="all"?r.value={limit:s.value.hitsPerPage,offset:s.value.currentPage*s.value.hitsPerPage,status:n}:r.value={limit:s.value.hitsPerPage,offset:s.value.currentPage*s.value.hitsPerPage},u.value=n,p({variables:r.value,updateQuery:(o,{fetchMoreResult:l})=>({Requests:l.Requests,RequestCount:l.RequestCount})})};return(n,o)=>{var l,h,v,b,y,R;return i(),f($,null,[ne,e("div",re,[e("span",ie,[e("button",{onClick:o[0]||(o[0]=()=>c("all")),class:q(["cursor-pointer font-bold relative flex items-center px-4 py-2 rounded-l-md text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",u.value==="all"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])},le,2),e("button",{onClick:o[1]||(o[1]=()=>c("pending")),class:q(["cursor-pointer font-bold -ml-px relative flex items-center px-4 py-2 text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",u.value==="pending"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])},ce,2),e("button",{onClick:o[2]||(o[2]=()=>c("approved")),class:q(["cursor-pointer font-bold -ml-px relative flex items-center px-4 py-2 text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",u.value==="approved"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])},fe,2),e("button",{onClick:o[3]||(o[3]=()=>c("declined")),class:q(["cursor-pointer font-bold -ml-px relative flex items-center px-4 py-2 rounded-r-md text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",u.value==="declined"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])},he,2)])]),e("div",ve,[e("div",be,[e("div",ye,[e("div",qe,[_e,!d(x)&&((h=(l=d(a))==null?void 0:l.Requests)==null?void 0:h.length)===0?(i(),P(U,{key:0})):g("",!0),d(a)?(i(),P(oe,{key:1,requests:d(a).Requests},null,8,["requests"])):g("",!0),d(x)?(i(),P(O,{key:2})):g("",!0)])])]),((b=(v=d(a))==null?void 0:v.Requests)==null?void 0:b.length)!==s.value.total&&!d(x)?(i(),f("button",{key:0,onClick:w,class:"cursor-pointer mt-6 inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 disabled:bg-indigo-400 disabled:cursor-not-allowed px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto"},[e("span",null,"Load more ("+m(s.value.total-((R=(y=d(a))==null?void 0:y.Requests)==null?void 0:R.length))+")",1),n.loadig?(i(),f("svg",we,Ce)):g("",!0)])):g("",!0)])],64)}}}),$e=async()=>{const t=D({setup(){L(E,j)},render:()=>N(Re)});return t.use(S()),t.mount("#request-container")};$e().then(()=>{console.log()});
//# sourceMappingURL=requestsOverview.0be57031.js.map
