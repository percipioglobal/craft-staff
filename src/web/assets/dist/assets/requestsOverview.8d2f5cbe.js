var B=Object.defineProperty,S=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var A=(e,t,o)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,N=(e,t)=>{for(var o in t||(t={}))E.call(t,o)&&A(e,o,t[o]);if(z)for(var o of z(t))Q.call(t,o)&&A(e,o,t[o]);return e},D=(e,t)=>S(e,j(t));import{o as a,c as x,a as s,d as $,t as l,z as F,b as g,n as w,r as T,e as k,F as L,v as R,u as V,f as c,h as O,i as G,j as H,y as U,p as I,D as J}from"./vendor.8d35d0ec.js";import{R as K}from"./requests.3ba2f9f6.js";import{_ as M,L as W}from"./listitem--loading.c0f41471.js";import{d as X}from"./useApolloClient.d3f22c17.js";const Y={},Z={class:"flex items-center justify-center p-4 border-b border-solid border-gray-200"},ee=s("span",{class:"text-base"}," No results found ",-1),te=[ee];function se(e,t){return a(),x("div",Z,te)}var oe=M(Y,[["render",se]]);const ne=["href","title"],re={class:"col-span-2 flex items-center whitespace-nowrap pl-4 pr-3 sm:pl-6 py-4 text-sm text-gray-500"},ie={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ae={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500 capitalize"},le={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},de={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ue={key:0,class:"block"},ce={class:"flex items-center whitespace-nowrap px-3 pr-3 py-4 text-sm"},me={class:"hidden lg:inline"},ge=$({props:{request:null},setup(e){return(t,o)=>{var i,d,f,p,C,P,m,r,n,u,v,y,h,b,q,_;return e.request?(a(),x("a",{key:0,href:`/admin/staff-management/requests/${e.request.id}`,title:`Go to request ${e.request.id}`,class:"grid grid-cols-11 border-b border-solid border-gray-200 no-underline hover:bg-gray-200"},[s("div",re,l(((f=(d=(i=e.request)==null?void 0:i.employee)==null?void 0:d.personalDetails)==null?void 0:f.firstName)?e.request.employee.personalDetails.firstName+" "+e.request.employee.personalDetails.lastName:"-"),1),s("div",ie,l(((p=e.request)==null?void 0:p.employer)?e.request.employer:"-"),1),s("div",ae,l(((C=e.request)==null?void 0:C.type)?e.request.type.replace("_"," "):"-"),1),s("div",le,l(((P=e.request)==null?void 0:P.dateCreated)?e.request.dateCreated:"-"),1),s("div",de,[F(l(((m=e.request)==null?void 0:m.admin)?e.request.admin:"-")+" ",1),((r=e.request)==null?void 0:r.admin)&&((n=e.request)==null?void 0:n.dateAdministered)?(a(),x("span",ue," on the "+l(((u=e.request)==null?void 0:u.dateAdministered)?e.request.dateAdministered:"-"),1)):g("",!0)]),s("div",ce,[s("span",{class:w(["rounded-2xl text-xs font-bold px-3 py-1 mb-0",((v=e.request)==null?void 0:v.status)==="pending"?"bg-yellow-300 text-yellow-900":"",((y=e.request)==null?void 0:y.status)==="approved"?"bg-emerald-300 text-emerald-900":"",((h=e.request)==null?void 0:h.status)==="declined"?"bg-red-300 text-red-900":"",((b=e.request)==null?void 0:b.status)==="canceled"?"bg-gray-300 text-gray-900":""])},[s("span",null,l(((q=e.request)==null?void 0:q.status)?e.request.status.slice(0,2):"-"),1),s("span",me,l(((_=e.request)==null?void 0:_.status)?e.request.status.slice(2,e.request.status.length):""),1)],2)])],8,ne)):g("",!0)}}}),xe=$({props:{requests:Object},setup(e){return(t,o)=>(a(!0),x(L,null,T(e.requests,i=>(a(),k(ge,{key:i.id,request:i},null,8,["request"]))),128))}}),fe=s("div",{class:"sm:flex"},[s("div",{class:"sm:flex-auto"},[s("h1",{class:"text-xl font-semibold text-gray-900"},"Requests"),s("p",{class:"mt-2 text-sm text-gray-700"},"Select a request to handle the employees request.")])],-1),pe={class:"mt-4 flex justify-end"},ve={class:"relative z-0 inline-flex shadow-sm rounded-md"},ye={class:"mt-8 flex flex-col w-full"},he={class:"-my-2 overflow-x-auto w-full"},be={class:"inline-block min-w-full overflow-scroll py-2 align-middle"},qe={class:"shadow border border-solid border-gray-300 md:rounded-lg"},we=O('<div class="grid grid-cols-11 border-b border-solid border-gray-300"><div class="col-span-2 py-3.5 pl-4 pr-3 sm:pl-6 text-left text-sm font-semibold text-gray-900">Employee</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Company</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Request Type</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Requested Date</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Administered By</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Status</div></div>',1),Ce={key:0,class:"animate-spin ml-1 h-3 w-3 text-white mb-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Pe=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ke=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Re=[Pe,ke],$e=$({setup(e){const t=R({currentPage:0,hitsPerPage:30,total:0}),o=R("all"),i=R({limit:t.value.hitsPerPage,offset:t.value.currentPage*t.value.hitsPerPage}),{result:d,loading:f,fetchMore:p,onResult:C}=V(K,i.value);C(r=>{t.value.total=r.data.RequestCount});const P=()=>{t.value.currentPage+=1,p({variables:i.value,updateQuery:(r,{fetchMoreResult:n})=>n?D(N({},r),{Requests:[...r.Requests,...n.Requests],RequestCount:n.RequestCount}):r})},m=r=>{r!=="all"?i.value={limit:t.value.hitsPerPage,offset:t.value.currentPage*t.value.hitsPerPage,status:r}:i.value={limit:t.value.hitsPerPage,offset:t.value.currentPage*t.value.hitsPerPage},o.value=r,p({variables:i.value,updateQuery:(n,{fetchMoreResult:u})=>({Requests:u.Requests,RequestCount:u.RequestCount})})};return(r,n)=>{var u,v,y,h,b,q;return a(),x(L,null,[fe,s("div",pe,[s("span",ve,[s("button",{onClick:n[0]||(n[0]=()=>m("all")),class:w(["cursor-pointer font-bold relative inline-flex items-center px-4 py-2 rounded-l-md text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",o.value==="all"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," All ",2),s("button",{onClick:n[1]||(n[1]=()=>m("pending")),class:w(["cursor-pointer font-bold -ml-px relative inline-flex items-center px-4 py-2 text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",o.value==="pending"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," Pending ",2),s("button",{onClick:n[2]||(n[2]=()=>m("approved")),class:w(["cursor-pointer font-bold -ml-px relative inline-flex items-center px-4 py-2 text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",o.value==="approved"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," Approved ",2),s("button",{onClick:n[3]||(n[3]=()=>m("declined")),class:w(["cursor-pointer font-bold -ml-px relative inline-flex items-center px-4 py-2 rounded-r-md text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",o.value==="declined"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," Declined ",2)])]),s("div",ye,[s("div",he,[s("div",be,[s("div",qe,[we,c(f)?(a(),k(W,{key:0})):g("",!0),!c(f)&&((v=(u=c(d))==null?void 0:u.Requests)==null?void 0:v.length)===0?(a(),k(oe,{key:1})):g("",!0),c(d)?(a(),k(xe,{key:2,requests:c(d).Requests},null,8,["requests"])):g("",!0)])])]),((h=(y=c(d))==null?void 0:y.Requests)==null?void 0:h.length)!==t.value.total&&!c(f)?(a(),x("button",{key:0,onClick:P,class:"cursor-pointer mt-6 inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 disabled:bg-indigo-400 disabled:cursor-not-allowed px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto"},[s("span",null,"Load more ("+l(t.value.total-((q=(b=c(d))==null?void 0:b.Requests)==null?void 0:q.length))+")",1),r.loadig?(a(),x("svg",Ce,Re)):g("",!0)])):g("",!0)])],64)}}}),_e=async()=>{const e=G({setup(){I(J,X)},render:()=>H($e)});return e.use(U()),e.mount("#request-container")};_e().then(()=>{console.log()});
//# sourceMappingURL=requestsOverview.8d2f5cbe.js.map
