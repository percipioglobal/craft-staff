import{o as i,b as x,e as t,d as _,t as a,k as A,f as g,n as w,i as N,g as P,F as z,a as R,u,I as D,l as L,h as B,p as S}from"./vue.esm-bundler.fd9c3e39.js";import{u as j,e as E,d as Q,D as F}from"./useApolloClient.6990f8c6.js";import{R as T}from"./requests.2f99cced.js";import{_ as V,L as O}from"./listitem--loading.67202aaf.js";const G={},H={class:"flex items-center justify-center p-4 border-b border-solid border-gray-200"},I=t("span",{class:"text-base"}," No results found ",-1),U=[I];function J(e,s){return i(),x("div",H,U)}var K=V(G,[["render",J]]);const M=["href","title"],W={class:"col-span-2 flex items-center whitespace-nowrap pl-4 pr-3 sm:pl-6 py-4 text-sm text-gray-500"},X={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Y={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500 capitalize"},Z={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ee={class:"col-span-2 flex items-center whitespace-nowrap px-3 py-4 text-sm text-gray-500"},te={key:0,class:"block"},se={class:"flex items-center whitespace-nowrap px-3 pr-3 py-4 text-sm"},oe={class:"hidden lg:inline"},ne=_({__name:"listitem--request",props:{request:null},setup(e){return(s,c)=>{var r,l,f,p,k,C,m,n,o,d,v,y,h,b,q,$;return e.request?(i(),x("a",{key:0,href:`/admin/staff-management/requests/${e.request.id}`,title:`Go to request ${e.request.id}`,class:"grid grid-cols-11 border-b border-solid border-gray-200 no-underline hover:bg-gray-200"},[t("div",W,a((f=(l=(r=e.request)==null?void 0:r.employee)==null?void 0:l.personalDetails)!=null&&f.firstName?e.request.employee.personalDetails.firstName+" "+e.request.employee.personalDetails.lastName:"-"),1),t("div",X,a((p=e.request)!=null&&p.employer?e.request.employer:"-"),1),t("div",Y,a((k=e.request)!=null&&k.type?e.request.type.replace("_"," "):"-"),1),t("div",Z,a((C=e.request)!=null&&C.dateCreated?e.request.dateCreated:"-"),1),t("div",ee,[A(a((m=e.request)!=null&&m.admin?e.request.admin:"-")+" ",1),((n=e.request)==null?void 0:n.admin)&&((o=e.request)==null?void 0:o.dateAdministered)?(i(),x("span",te," on the "+a((d=e.request)!=null&&d.dateAdministered?e.request.dateAdministered:"-"),1)):g("",!0)]),t("div",se,[t("span",{class:w(["rounded-2xl text-xs font-bold px-3 py-1 mb-0",((v=e.request)==null?void 0:v.status)==="pending"?"bg-yellow-300 text-yellow-900":"",((y=e.request)==null?void 0:y.status)==="approved"?"bg-emerald-300 text-emerald-900":"",((h=e.request)==null?void 0:h.status)==="declined"?"bg-red-300 text-red-900":"",((b=e.request)==null?void 0:b.status)==="canceled"?"bg-gray-300 text-gray-900":""])},[t("span",null,a((q=e.request)!=null&&q.status?e.request.status.slice(0,2):"-"),1),t("span",oe,a(($=e.request)!=null&&$.status?e.request.status.slice(2,e.request.status.length):""),1)],2)])],8,M)):g("",!0)}}}),re=_({__name:"list--requests",props:{requests:Object},setup(e){return(s,c)=>(i(!0),x(z,null,N(e.requests,r=>(i(),P(ne,{key:r.id,request:r},null,8,["request"]))),128))}}),ie=t("div",{class:"sm:flex"},[t("div",{class:"sm:flex-auto"},[t("h1",{class:"text-xl font-semibold text-gray-900"},"Requests"),t("p",{class:"mt-2 text-sm text-gray-700"},"Select a request to handle the employees request.")])],-1),ae={class:"mt-4 flex justify-end"},le={class:"relative z-0 inline-flex shadow-sm rounded-md"},de={class:"mt-8 flex flex-col w-full"},ue={class:"-my-2 overflow-x-auto w-full"},ce={class:"inline-block min-w-full overflow-scroll py-2 align-middle"},me={class:"shadow border border-solid border-gray-300 md:rounded-lg"},ge=D('<div class="grid grid-cols-11 border-b border-solid border-gray-300"><div class="col-span-2 py-3.5 pl-4 pr-3 sm:pl-6 text-left text-sm font-semibold text-gray-900">Employee</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Company</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Request Type</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Requested Date</div><div class="col-span-2 px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Administered By</div><div class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Status</div></div>',1),xe={key:0,class:"animate-spin ml-1 h-3 w-3 text-white mb-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fe=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),pe=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),ve=[fe,pe],ye=_({__name:"Requests",setup(e){const s=R({currentPage:0,hitsPerPage:30,total:0}),c=R("all"),r=R({limit:s.value.hitsPerPage,offset:s.value.currentPage*s.value.hitsPerPage}),{result:l,loading:f,fetchMore:p,onResult:k}=j(T,r.value);k(n=>{s.value.total=n.data.RequestCount});const C=()=>{s.value.currentPage+=1,p({variables:r.value,updateQuery:(n,{fetchMoreResult:o})=>o?{...n,Requests:[...n.Requests,...o.Requests],RequestCount:o.RequestCount}:n})},m=n=>{n!=="all"?r.value={limit:s.value.hitsPerPage,offset:s.value.currentPage*s.value.hitsPerPage,status:n}:r.value={limit:s.value.hitsPerPage,offset:s.value.currentPage*s.value.hitsPerPage},c.value=n,p({variables:r.value,updateQuery:(o,{fetchMoreResult:d})=>({Requests:d.Requests,RequestCount:d.RequestCount})})};return(n,o)=>{var d,v,y,h,b,q;return i(),x(z,null,[ie,t("div",ae,[t("span",le,[t("button",{onClick:o[0]||(o[0]=()=>m("all")),class:w(["cursor-pointer font-bold relative inline-flex items-center px-4 py-2 rounded-l-md text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",c.value==="all"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," All ",2),t("button",{onClick:o[1]||(o[1]=()=>m("pending")),class:w(["cursor-pointer font-bold -ml-px relative inline-flex items-center px-4 py-2 text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",c.value==="pending"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," Pending ",2),t("button",{onClick:o[2]||(o[2]=()=>m("approved")),class:w(["cursor-pointer font-bold -ml-px relative inline-flex items-center px-4 py-2 text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",c.value==="approved"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," Approved ",2),t("button",{onClick:o[3]||(o[3]=()=>m("declined")),class:w(["cursor-pointer font-bold -ml-px relative inline-flex items-center px-4 py-2 rounded-r-md text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",c.value==="declined"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-400 hover:text-white"])}," Declined ",2)])]),t("div",de,[t("div",ue,[t("div",ce,[t("div",me,[ge,u(f)?(i(),P(O,{key:0})):g("",!0),!u(f)&&((v=(d=u(l))==null?void 0:d.Requests)==null?void 0:v.length)===0?(i(),P(K,{key:1})):g("",!0),u(l)?(i(),P(re,{key:2,requests:u(l).Requests},null,8,["requests"])):g("",!0)])])]),((h=(y=u(l))==null?void 0:y.Requests)==null?void 0:h.length)!==s.value.total&&!u(f)?(i(),x("button",{key:0,onClick:C,class:"cursor-pointer mt-6 inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 disabled:bg-indigo-400 disabled:cursor-not-allowed px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto"},[t("span",null,"Load more ("+a(s.value.total-((q=(b=u(l))==null?void 0:b.Requests)==null?void 0:q.length))+")",1),n.loadig?(i(),x("svg",xe,ve)):g("",!0)])):g("",!0)])],64)}}}),he=async()=>{const e=L({setup(){S(F,Q)},render:()=>B(ye)});return e.use(E()),e.mount("#request-container")};he().then(()=>{console.log()});
//# sourceMappingURL=requestsOverview.2ddc7d02.js.map
